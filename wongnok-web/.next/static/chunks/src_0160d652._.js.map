{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Avatar({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Root>) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      className={cn(\n        \"relative flex size-8 shrink-0 overflow-hidden rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Image>) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\"aspect-square size-full\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted flex size-full items-center justify-center rounded-full\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,KAGoC;QAHpC,EACd,SAAS,EACT,GAAG,OAC+C,GAHpC;IAId,qBACE,6LAAC,qKAAA,CAAA,OAAoB;QACnB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8DACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS;AAgBT,SAAS,YAAY,KAGgC;QAHhC,EACnB,SAAS,EACT,GAAG,OACgD,GAHhC;IAInB,qBACE,6LAAC,qKAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,2BAA2B;QACxC,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,eAAe,KAGgC;QAHhC,EACtB,SAAS,EACT,GAAG,OACmD,GAHhC;IAItB,qBACE,6LAAC,qKAAA,CAAA,WAAwB;QACvB,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,oEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/Rating.tsx"],"sourcesContent":["// Example type for ratingFoodRecipe\ntype RatingFoodRecipe = {\n  fillPercent: number\n}\n\nconst Rating = ({ fillPercent }: RatingFoodRecipe) => {\n  return (\n    <span\n      className=\"relative inline-block w-6 h-10 text-xl text-gray-300 overflow-hidden \"\n      aria-label={\n        fillPercent === 100\n          ? 'Filled star'\n          : fillPercent === 0\n          ? 'Empty star'\n          : 'Partial star'\n      }\n    >\n  <span className=\"absolute left-0 top-0 w-full h-full text-3xl\">★</span>\n      <span\n        className=\"absolute left-0 top-0 h-full overflow-hidden pointer-events-none text-blue-600 text-3xl\"\n        style={{ width: `${fillPercent}%` }}\n      >\n        ★\n      </span>\n    </span>\n  );\n};\n\nexport default Rating\n"],"names":[],"mappings":"AAAA,oCAAoC;;;;;;AAKpC,MAAM,SAAS;QAAC,EAAE,WAAW,EAAoB;IAC/C,qBACE,6LAAC;QACC,WAAU;QACV,cACE,gBAAgB,MACZ,gBACA,gBAAgB,IAChB,eACA;;0BAGV,6LAAC;gBAAK,WAAU;0BAA+C;;;;;;0BAC3D,6LAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,OAAO,AAAC,GAAc,OAAZ,aAAY;gBAAG;0BACnC;;;;;;;;;;;;AAKP;KArBM;uCAuBS","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/DeleteRecipe.tsx"],"sourcesContent":["import Image from 'next/image'\nimport { Button } from './ui/button'\nimport { useRouter } from 'next/navigation'\nimport { useMutation } from '@tanstack/react-query'\nimport { deleteMyRecipe } from '@/services/recipe.service'\nimport React, { useEffect, useState } from 'react'\n\ntype propsRecieve = {\n  recipeId: number\n  closePopup: (value: boolean) => void\n}\n\nconst DeleteRecipe = ({ recipeId, closePopup }: propsRecieve) => {\n  const [showModal, setShowModal] = useState(false)\n  const [exiting, setExiting] = useState(false)\n  useEffect(() => {\n    const timer = setTimeout(() => setShowModal(true), 400)\n    return () => clearTimeout(timer)\n  }, [])\n\n  const handleClose = () => {\n    setExiting(true)\n    setTimeout(() => closePopup(false), 400)\n  }\n  const router = useRouter()\n  const { mutateAsync: deleteMyrecipe } = useMutation({\n    mutationFn: deleteMyRecipe,\n    onError: () => {\n  console.error('delete recipe request failed')\n    },\n    onSuccess: () => {\n      router.replace('/')\n    },\n  })\n\n  const delteMyRecipeAlert = () => {\n    deleteMyrecipe(Number(recipeId))\n  }\n\n  return (\n    <div className='fixed inset-0 z-50 flex items-center justify-center mx-30'>\n      <div className='absolute inset-0 bg-Grayscale-50 opacity-75 pointer-events-none'></div>\n      <div\n        className={`w-[495px] h-[215px] relative border bg-white z-10 py-6 rounded-xl transition-all duration-500 ease-out transform ${showModal && !exiting ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-8'}`}\n      >\n        <div\n          className='w-6 h-6 cursor-pointer absolute top-4 right-4'\n          onClick={handleClose}\n        >\n          <Image\n            src='/icons/exit.svg'\n            alt='exit popup'\n            width={14}\n            height={14}\n          />\n        </div>\n        <div className='flex flex-col jusitfy-center items-center mx-6'>\n          <div className='w-[64px] h-64px flex justity-center items-center'>\n            <Image\n              src='/warningdelete.png'\n              alt='warning delete'\n              width={56}\n              height={56}\n            />\n          </div>\n          <div className='font-bold text-4xl my-4'>ต้องการลบสูตรอาหาร</div>\n          <div className='flex justify-center items-center '>\n            <Button\n              className='mx-2 w-[152px] h-[40px] bg-white text-Accent-Error-500 text-base cursor-pointer'\n              variant='outline'\n              onClick={delteMyRecipeAlert}\n            >\n              ลบสูตรอาหาร\n            </Button>\n            <Button\n              className='mx-2 w-[152px] h-[40px] bg-secondary-500 text-white text-base cursor-pointer'\n              variant='outline'\n              onClick={handleClose}\n            >\n              ไม่ต้องการ\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default DeleteRecipe\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAOA,MAAM,eAAe;QAAC,EAAE,QAAQ,EAAE,UAAU,EAAgB;;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM,QAAQ;gDAAW,IAAM,aAAa;+CAAO;YACnD;0CAAO,IAAM,aAAa;;QAC5B;iCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,WAAW;QACX,WAAW,IAAM,WAAW,QAAQ;IACtC;IACA,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,aAAa,cAAc,EAAE,GAAG,CAAA,GAAA,iLAAA,CAAA,cAAW,AAAD,EAAE;QAClD,YAAY,uIAAA,CAAA,iBAAc;QAC1B,OAAO;wCAAE;gBACX,QAAQ,KAAK,CAAC;YACZ;;QACA,SAAS;wCAAE;gBACT,OAAO,OAAO,CAAC;YACjB;;IACF;IAEA,MAAM,qBAAqB;QACzB,eAAe,OAAO;IACxB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBACC,WAAW,AAAC,oHAAoM,OAAjF,aAAa,CAAC,UAAU,8BAA8B;;kCAErL,6LAAC;wBACC,WAAU;wBACV,SAAS;kCAET,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;;;;;;;;;;;kCAGZ,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,gIAAA,CAAA,UAAK;oCACJ,KAAI;oCACJ,KAAI;oCACJ,OAAO;oCACP,QAAQ;;;;;;;;;;;0CAGZ,6LAAC;gCAAI,WAAU;0CAA0B;;;;;;0CACzC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,qIAAA,CAAA,SAAM;wCACL,WAAU;wCACV,SAAQ;wCACR,SAAS;kDACV;;;;;;kDAGD,6LAAC,qIAAA,CAAA,SAAM;wCACL,WAAU;wCACV,SAAQ;wCACR,SAAS;kDACV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;GA1EM;;QAYW,qIAAA,CAAA,YAAS;QACgB,iLAAA,CAAA,cAAW;;;KAb/C;uCA2ES","debugId":null}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/Popuprating.tsx"],"sourcesContent":["import Image from 'next/image'\nimport { Button } from './ui/button'\nimport { useRouter } from 'next/navigation'\nimport { useMutation } from '@tanstack/react-query'\nimport { createRating } from '@/services/recipe.service'\nimport Star from '@/components/Rating'\nimport React, { useEffect, useState } from 'react'\n\ntype propsRecieve = {\n  recipeId: number\n  // ค่าเฉลี่ยคะแนนจากผู้ใช้งานคนอื่น ๆ ของสูตรนี้ (0-5)\n  averageRating?: number\n  closePopup: (value: boolean) => void\n}\n\nconst PopupRating = ({ recipeId, averageRating, closePopup }: propsRecieve) => {\n  const [selected, setSelected] = useState(0)\n  const [showModal, setShowModal] = useState(false)\n  const [exiting, setExiting] = useState(false)\n\n  useEffect(() => {\n    const timer = setTimeout(() => setShowModal(true), 400)\n    return () => clearTimeout(timer)\n  }, [])\n\n  const handleClose = () => {\n    setExiting(true)\n    setTimeout(() => closePopup(false), 400)\n  }\n  const router = useRouter()\n  const { mutateAsync: giveRating } = useMutation({\n    mutationFn: createRating,\n    onError: () => {\n  console.error('rating request failed')\n    },\n    onSuccess: () => {\n      router.replace('/')\n    },\n  })\n\n  const handlerRating = (rating: number) => {\n    giveRating({\n      id: 0, // หรือ undefined ถ้า backend ไม่ใช้\n      UserID: '', // หรือส่ง user id จริง ถ้ามี\n      foodRecipeID: recipeId,\n      score: rating,\n    })\n  }\n\n  return (\n    <div className='fixed inset-0 z-50 flex items-center justify-center mx-30'>\n      <div className='absolute inset-0 bg-Grayscale-50 opacity-75 pointer-events-none'></div>\n      <div\n        className={`w-[495px] h-[215px] relative border bg-white z-10 py-6 rounded-xl transition-all duration-500 ease-out transform ${\n          showModal && !exiting\n            ? 'opacity-100 translate-y-0'\n            : 'opacity-0 -translate-y-8'\n        }`}\n      >\n        <div\n          className='w-6 h-6 cursor-pointer absolute top-4 right-4'\n          onClick={handleClose}\n        >\n          <Image\n            src='/icons/exit.svg'\n            alt='exit popup'\n            width={14}\n            height={14}\n          />\n        </div>\n        <div className='flex flex-col jusitfy-center items-center mx-6'>\n          <div className='text-2xl my-4'>ให้คะแนนสูตรอาหารนี้</div>\n          <div className='flex flex-col justify-center items-center '>\n            <div className='flex gap-1'>\n              {Array.from({ length: 5 }, (_, i) => (\n                <span\n                  key={i}\n                  onClick={() => setSelected(i + 1)}\n                  className='cursor-pointer'\n                >\n                  <Star fillPercent={i < selected ? 100 : 0} />\n                </span>\n              ))}\n            </div>\n            <Button\n              className='mx-2 w-[152px] h-[40px] bg-secondary-500 text-white text-base cursor-pointer'\n              variant='outline'\n              onClick={() => {\n                handlerRating(selected)\n              }}\n              disabled={selected === 0}\n            >\n              ยืนยัน\n            </Button>\n          </div>\n        </div>\n        {/* คะแนนเฉลี่ยจากผู้ใช้ทั้งหมด มุมขวาล่างของ popup */}\n        <div className='absolute bottom-3 right-4'>\n          {typeof averageRating === 'number' && averageRating > 0 ? (\n            <span className='inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-700 shadow'>\n              ★ {Math.min(averageRating, 5).toFixed(1)}\n            </span>\n          ) : (\n            <span className='text-xs text-gray-400'>ยังไม่มีคะแนนเฉลี่ย</span>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default PopupRating\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AASA,MAAM,cAAc;QAAC,EAAE,QAAQ,EAAE,aAAa,EAAE,UAAU,EAAgB;;IACxE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,MAAM,QAAQ;+CAAW,IAAM,aAAa;8CAAO;YACnD;yCAAO,IAAM,aAAa;;QAC5B;gCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,WAAW;QACX,WAAW,IAAM,WAAW,QAAQ;IACtC;IACA,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,EAAE,aAAa,UAAU,EAAE,GAAG,CAAA,GAAA,iLAAA,CAAA,cAAW,AAAD,EAAE;QAC9C,YAAY,uIAAA,CAAA,eAAY;QACxB,OAAO;uCAAE;gBACX,QAAQ,KAAK,CAAC;YACZ;;QACA,SAAS;uCAAE;gBACT,OAAO,OAAO,CAAC;YACjB;;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,WAAW;YACT,IAAI;YACJ,QAAQ;YACR,cAAc;YACd,OAAO;QACT;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBACC,WAAW,AAAC,oHAIX,OAHC,aAAa,CAAC,UACV,8BACA;;kCAGN,6LAAC;wBACC,WAAU;wBACV,SAAS;kCAET,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;;;;;;;;;;;kCAGZ,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAAgB;;;;;;0CAC/B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACZ,MAAM,IAAI,CAAC;4CAAE,QAAQ;wCAAE,GAAG,CAAC,GAAG,kBAC7B,6LAAC;gDAEC,SAAS,IAAM,YAAY,IAAI;gDAC/B,WAAU;0DAEV,cAAA,6LAAC,+HAAA,CAAA,UAAI;oDAAC,aAAa,IAAI,WAAW,MAAM;;;;;;+CAJnC;;;;;;;;;;kDAQX,6LAAC,qIAAA,CAAA,SAAM;wCACL,WAAU;wCACV,SAAQ;wCACR,SAAS;4CACP,cAAc;wCAChB;wCACA,UAAU,aAAa;kDACxB;;;;;;;;;;;;;;;;;;kCAML,6LAAC;wBAAI,WAAU;kCACZ,OAAO,kBAAkB,YAAY,gBAAgB,kBACpD,6LAAC;4BAAK,WAAU;;gCAAiG;gCAC5G,KAAK,GAAG,CAAC,eAAe,GAAG,OAAO,CAAC;;;;;;qFAGxC,6LAAC;4BAAK,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;;AAMpD;GA9FM;;QAcW,qIAAA,CAAA,YAAS;QACY,iLAAA,CAAA,cAAW;;;KAf3C;uCA+FS","debugId":null}},
    {"offset": {"line": 516, "column": 0}, "map": {"version":3,"sources":["file:///app/src/components/PopupPermitRating.tsx"],"sourcesContent":["import Image from 'next/image'\nimport { Button } from './ui/button'\nimport React, { useEffect, useState } from 'react'\nimport { signIn, useSession } from 'next-auth/react'\n\ntype propsRecieve = {\n  userID?:string\n  rating: number\n  // ค่าเฉลี่ยคะแนนของสูตรนี้ (0-5)\n  averageRating?: number\n  closePopup: (value: boolean) => void\n}\n\nconst PopupPermitRating = ({ userID,rating, averageRating, closePopup }: propsRecieve) => {\n  const { data: session } = useSession()\n  const [showModal, setShowModal] = useState(false)\n  const [exiting, setExiting] = useState(false)\n\n  useEffect(() => {\n    const timer = setTimeout(() => setShowModal(true), 400)\n    return () => clearTimeout(timer)\n  }, [])\n\n  const handleClose = () => {\n    setExiting(true)\n    setTimeout(() => closePopup(false), 400)\n  }\n  \n  return (\n    <div className='fixed inset-0 z-50 flex items-center justify-center mx-30'>\n      <div className='absolute inset-0 bg-Grayscale-50 opacity-75 pointer-events-none'></div>\n      <div\n        className={`w-[495px] h-[215px] relative border bg-white z-10 py-6 rounded-xl transition-all duration-500 ease-out transform ${\n          showModal && !exiting\n            ? 'opacity-100 translate-y-0'\n            : 'opacity-0 -translate-y-8'\n        }`}\n      >\n        <div\n          className='w-6 h-6 cursor-pointer absolute top-4 right-4'\n          onClick={handleClose}\n        >\n          <Image\n            src='/icons/exit.svg'\n            alt='exit popup'\n            width={14}\n            height={14}\n          />\n        </div>\n        <div className='flex flex-col jusitfy-center items-center mx-6'>\n          <div className='text-2xl my-4'>ให้คะแนนสูตรอาหารนี้</div>\n          <div className='flex flex-col justify-center items-center '>\n          \n            {session?.userId && session?.accessToken && rating != 0 && userID != session?.userId && (\n              <div className='flex gap-1'>\n                คุณให้คะแนนสูตรนี้เเล้ว : {rating}\n              </div>\n            )}\n            {userID == session?.userId && (\n              <div className='flex gap-1'>\n                คุณไม่สามารถให้คะแนนสูตรตัวเองได้\n              </div>\n            )}\n            {!session?.userId && !session?.accessToken && rating == 0 && (\n              <div className='flex gap-1'>โปรดลงทะเบียนเพื่อให้คะเเนน</div>\n            )}\n            <Button\n              className='mx-2 my-3 w-[152px] h-[40px] bg-secondary-500 text-white text-base cursor-pointer'\n              variant='outline'\n              onClick={() => {\n                if (session?.userId && session?.accessToken && rating != 0 || userID == session?.userId)\n                  closePopup(false)\n                else {\n                  closePopup(false)\n                  signIn('keycloak')\n                }\n              }}\n            >\n              ปิด\n            </Button>\n          </div>\n        </div>\n        {/* คะแนนเฉลี่ยจากผู้ใช้ทั้งหมด มุมขวาล่างของ popup */}\n        <div className='absolute bottom-3 right-4'>\n          {typeof averageRating === 'number' && averageRating > 0 ? (\n            <span className='inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-700 shadow'>\n              ★ {Math.min(averageRating, 5).toFixed(1)}\n            </span>\n          ) : (\n            <span className='text-xs text-gray-400'>ยังไม่มีคะแนนเฉลี่ย</span>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default PopupPermitRating\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;;AAUA,MAAM,oBAAoB;QAAC,EAAE,MAAM,EAAC,MAAM,EAAE,aAAa,EAAE,UAAU,EAAgB;;IACnF,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,CAAA,GAAA,iJAAA,CAAA,aAAU,AAAD;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;uCAAE;YACR,MAAM,QAAQ;qDAAW,IAAM,aAAa;oDAAO;YACnD;+CAAO,IAAM,aAAa;;QAC5B;sCAAG,EAAE;IAEL,MAAM,cAAc;QAClB,WAAW;QACX,WAAW,IAAM,WAAW,QAAQ;IACtC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBACC,WAAW,AAAC,oHAIX,OAHC,aAAa,CAAC,UACV,8BACA;;kCAGN,6LAAC;wBACC,WAAU;wBACV,SAAS;kCAET,cAAA,6LAAC,gIAAA,CAAA,UAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;;;;;;;;;;;kCAGZ,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CAAgB;;;;;;0CAC/B,6LAAC;gCAAI,WAAU;;oCAEZ,CAAA,oBAAA,8BAAA,QAAS,MAAM,MAAI,oBAAA,8BAAA,QAAS,WAAW,KAAI,UAAU,KAAK,WAAU,oBAAA,8BAAA,QAAS,MAAM,mBAClF,6LAAC;wCAAI,WAAU;;4CAAa;4CACC;;;;;;;oCAG9B,WAAU,oBAAA,8BAAA,QAAS,MAAM,mBACxB,6LAAC;wCAAI,WAAU;kDAAa;;;;;;oCAI7B,EAAC,oBAAA,8BAAA,QAAS,MAAM,KAAI,EAAC,oBAAA,8BAAA,QAAS,WAAW,KAAI,UAAU,mBACtD,6LAAC;wCAAI,WAAU;kDAAa;;;;;;kDAE9B,6LAAC,qIAAA,CAAA,SAAM;wCACL,WAAU;wCACV,SAAQ;wCACR,SAAS;4CACP,IAAI,CAAA,oBAAA,8BAAA,QAAS,MAAM,MAAI,oBAAA,8BAAA,QAAS,WAAW,KAAI,UAAU,KAAK,WAAU,oBAAA,8BAAA,QAAS,MAAM,GACrF,WAAW;iDACR;gDACH,WAAW;gDACX,CAAA,GAAA,iJAAA,CAAA,SAAM,AAAD,EAAE;4CACT;wCACF;kDACD;;;;;;;;;;;;;;;;;;kCAML,6LAAC;wBAAI,WAAU;kCACZ,OAAO,kBAAkB,YAAY,gBAAgB,kBACpD,6LAAC;4BAAK,WAAU;;gCAAiG;gCAC5G,KAAK,GAAG,CAAC,eAAe,GAAG,OAAO,CAAC;;;;;;qFAGxC,6LAAC;4BAAK,WAAU;sCAAwB;;;;;;;;;;;;;;;;;;;;;;;AAMpD;GAlFM;;QACsB,iJAAA,CAAA,aAAU;;;KADhC;uCAmFS","debugId":null}},
    {"offset": {"line": 706, "column": 0}, "map": {"version":3,"sources":["file:///app/src/app/recipe-details/%5BrecipeId%5D/page.tsx"],"sourcesContent":["'use client'\n\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'\nimport { Button } from '@/components/ui/button'\nimport { useSession } from 'next-auth/react'\nimport Image from 'next/image'\nimport Link from 'next/link'\nimport React, { useState } from 'react'\nimport Star from '@/components/Rating'\nimport DeleteRecipe from '@/components/DeleteRecipe'\nimport { CreateFavorite, DeleteFavorite, fetchRecipeDetails } from '@/services/recipe.service'\nimport { useMutation, useQuery } from '@tanstack/react-query'\nimport PopupRating from '@/components/Popuprating'\nimport PopupPermitRating from '@/components/PopupPermitRating'\nimport { useRouter } from 'next/navigation'\n\n\ntype RecipeDetailsIdProps = {\n  params: Promise<{ recipeId: string }>\n}\n\nexport default function RecipeDetailsId({ params }: RecipeDetailsIdProps) {\n  const [closePopup, setClosePopup] = useState<boolean>(false)\n  const [PermitRating, SetPermitRating] = useState<boolean>(false)\n  const [closePopupRating, setClosePopupRating] = useState<boolean>(false)\n  const { recipeId } = React.use(params)\n  const { data: session, status } = useSession()\n\n  const router = useRouter()\n\n  const { data, isLoading, isError } = useQuery({\n    queryKey: ['recipeDetail', recipeId],\n    queryFn: () => fetchRecipeDetails(Number(recipeId)),\n  })\n\n  const { mutateAsync: AddFavorite } = useMutation({\n    mutationFn: (foodRecipeID: number) => CreateFavorite(foodRecipeID),\n    onError: () => {\n  console.error('recipe-details: add favorite failed')\n    },\n    onSuccess: () => {\n      router.replace('/')\n    },\n  })\n  \n  const { mutateAsync: RemoveFavorite } = useMutation({\n    mutationFn: (foodRecipeID: number) => DeleteFavorite(foodRecipeID),\n    onError: () => {\n  console.error('recipe-details: remove favorite failed')\n    },\n    onSuccess: () => {\n      router.replace('/')\n    },\n  })\n  if (isLoading || status === 'loading') return <div>Loading...</div>\n\n  if (isError) return <div>Error</div>\n\n  //\n\n  // Add rating state and max stars\n  // Show average rating from data (read-only)\n  const maxStars = 5\n  const rawAvgRating = data?.data?.averageRating ?? 0\n  const avgRating = Math.min(rawAvgRating, maxStars)\n\n  return (\n    <div className='flex flex-col gap-y-5'>\n      {closePopup && (\n        <DeleteRecipe recipeId={Number(recipeId)} closePopup={setClosePopup} />\n      )}\n      {closePopupRating && (\n        <PopupRating\n          recipeId={Number(recipeId)}\n          averageRating={Number(data?.data?.averageRating ?? 0)}\n          closePopup={setClosePopupRating}\n        />\n      )}\n      {PermitRating && (\n        <PopupPermitRating\n          rating={Number(data?.data.rating.score)}\n          userID={data?.data.user.id}\n          averageRating={Number(data?.data?.averageRating ?? 0)}\n          closePopup={SetPermitRating}\n        />\n      )}\n\n      <div className='flex flex-col gap-y-5'>\n        {session?.userId &&\n          data?.data?.user?.id &&\n          data?.data?.user?.id === session.userId && (\n            <div className='flex justify-between items-center'>\n              <div>\n                <h1 className='font-bold text-4xl'>{data?.data.name}</h1>\n              </div>\n\n              <div className='flex justify-center '>\n        <Link href={`/edit-recipe/${recipeId}`}>\n                  <Button\n                    className='text-primary-500 mx-2 cursor-pointer bg-white'\n                    variant='secondary'\n                  >\n          <img src='/icons/Edit.svg' width={12} height={12} alt='edit logo' />\n                    แก้ไขสูตรอาหาร\n                  </Button>\n                </Link>\n\n                <Button\n                  className='bg-Accent-Error-500 mx-2 cursor-pointer text-white'\n                  variant='secondary'\n                  onClick={() => setClosePopup(true)}\n                >\n                  <img src='/icons/trash.svg' width={12} height={12} alt='delete logo' />\n                  <div className='ms-2'>ลบสูตรอาหาร</div>\n                </Button>\n              </div>\n            </div>\n          )}\n        <div>\n          <p>{data?.data.description}</p>\n          <p className='text-secondary text-xs'>{data?.data.updatedAt}</p>\n        </div>\n        <div className='flex items-center'>\n          <Avatar>\n            <AvatarImage src={data?.data.user.imageUrl} />\n            <AvatarFallback>Oatter</AvatarFallback>\n          </Avatar>\n          <div className='mx-3'>\n            {data?.data.user.nickName}\n            \n            {session?.userId && data?.data.favorite.id == 0 &&<Button\n              className='text-primary-500 mx-2 cursor-pointer bg-white border'\n              variant='secondary' onClick={()=>AddFavorite(Number(data?.data.id))}\n            >\n              <img src='/icons/fav.svg' width={12} height={12} alt='fav logo' />\n              เพิ่มรายการโปรด\n            </Button>}\n            {session?.userId && data?.data.favorite.id != 0 &&<Button\n              className='text-primary-500 mx-2 cursor-pointer bg-white border'\n              variant='secondary' onClick={()=>RemoveFavorite(Number(data?.data.id))}\n            >\n              <img src='/icons/notfav.svg' width={12} height={12} alt='unfav logo' />\n              ลบออกจากรายการโปรด\n            </Button>}\n          </div>\n        </div>\n      </div>\n      <div className='flex gap-x-8 '>\n        <div className='flex flex-col gap-6'>\n          <div className='relative w-[584px] h-[334px]'>\n            <Image\n              src={data?.data.imageUrl || '/beef_wellington.png'}\n              alt='beef wellington'\n              fill\n              className='object-cover'\n              sizes='(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 584px'\n            />\n          </div>\n          <div className='rounded-sm px-2 bg-secondary-100 text-secondary-900 flex'>\n            <img src='/icons/av_timer.svg' alt='level' width={18} height={18} />\n            <p className='mx-3'>{data?.data.cookingDuration.name} นาที</p>\n          </div>\n        </div>\n        <div>\n          <h1 className='text-3xl font-bold'>วัตถุดิบ</h1>\n          <p>\n            {(data?.data.ingredient || '').split(',').map((item, idx) => (\n              <li key={idx}>{item.trim()}</li>\n            ))}\n          </p>\n        </div>\n      </div>\n      <div className='flex flex-col mt-2 mb-3'>\n        <h1 className='text-3xl font-bold'>วิธีการทำ</h1>\n        <p>\n          {(data?.data.instruction || '').split(',').map((item, idx) => (\n            <li className='my-1' key={idx}>\n              {item.trim()}\n            </li>\n          ))}\n        </p>\n        <div className='mt-12 flex'>\n          <div>\n            <div className='text-lg font-bold'>คะแนนสูตรอาหารนี้</div>\n            <div className='flex items-center gap-2'>\n              <div className='flex items-center'>\n                {Array.from({ length: maxStars }, (_, i) => {\n                  let fillPercent = 0\n                  if (i < Math.floor(avgRating)) {\n                    fillPercent = 100\n                  } else if (i === Math.floor(avgRating)) {\n                    fillPercent = Math.floor((avgRating % 1) * 100)\n                  }\n                  return <Star key={i} fillPercent={fillPercent} />\n                })}\n              </div>\n              <div className='text-base text-secondary-700'>\n                <div>\n                  (\n                  {rawAvgRating\n                    ? Math.min(rawAvgRating, maxStars).toFixed(1)\n                    : 'ยังไม่มีคะแนน'}\n                  )\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div\n            className='flex jusfify-center items-center mx-8'\n            onClick={() => {\n              if (\n                data?.data?.rating?.score == 0 &&\n                session?.userId &&\n                session?.accessToken &&\n                data?.data?.user.id != session?.userId\n              ) {\n                setClosePopupRating(true)\n              } else {\n                SetPermitRating(true)\n              }\n            }}\n          >\n            <Button variant='outline' className='text-2xl p-2 cursor-pointer'>\n              <img src='/icons/ratingforgive.svg' alt='ratingforgive logo' width={24} height={24} />\n              ให้คะแนน\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}